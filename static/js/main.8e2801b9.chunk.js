(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,n){},152:function(e,t){},154:function(e,t){},161:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(35),i=n.n(o),c=(n(87),n(9)),l=n(165),u=n(166),s=n(167),m=n(36),d=n(37),f=n.n(d),p=n(13),h={fileContent:"\nG21\nG00 X0 Y0 F70\nG01 Z-1 F50\nG01 X0 Y5 F50\nG02 X5 Y0 J-5\nG01 X0 Y0\nG00 Z0 F70\nM30\n"};var E=Object(p.combineReducers)({file:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_FILE_CONTENT":return{fileContent:t.payload.fileContent};case"RESET_FILE":return{fileContent:""};default:return e}}}),g=Object(p.createStore)(E,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),b=(n(141),n(142),n(19)),v=n(20),y=n(22),_=n(21),w=n(23);var C=n(48),O={border:"1px solid gray",padding:"2rem",justifyContent:"center",display:"flex",alignItems:"center"},k=Object(m.DropTarget)(function(e){return e.accepts},{drop:function(e,t){e.onDrop&&e.onDrop(e,t)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}})(function(e){var t=e.canDrop,n=e.isOver,a=t&&n;return(0,e.connectDropTarget)(r.a.createElement("div",{style:O},r.a.createElement(C.b,{icon:C.a}),a?"Release to drop":"Drag file here"))}),j=n(162),D={display:"none"},x=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(y.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(o)))).fileInputRef=r.a.createRef(),n.onFileChange=function(e){var t=e.currentTarget.files;n.storeContent(t)},n.onButtonClick=function(){n.fileInputRef.current&&n.fileInputRef.current.click()},n.onResetClick=function(){n.props.resetFile()},n.handleFileDrop=function(e,t){t&&n.storeContent(t.getItem().files)},n}return Object(w.a)(t,e),Object(v.a)(t,[{key:"storeContent",value:function(e){var t=this;if(e&&e[0]){var n=e[0],a=new FileReader;a.readAsText(n),a.onload=function(){t.props.updateFileContent(a.result?a.result.toString():"")}}}},{key:"render",value:function(){return r.a.createElement("div",{className:"file-uploader"},r.a.createElement("input",{style:D,ref:this.fileInputRef,type:"file",onChange:this.onFileChange}),r.a.createElement(k,{onDrop:this.handleFileDrop,accepts:[d.NativeTypes.FILE]}),r.a.createElement("div",{className:"buttons d-flex justify-content-between"},r.a.createElement(j.a,{color:"warning",onClick:this.onResetClick},"Reset"),r.a.createElement(j.a,{color:"primary",onClick:this.onButtonClick},"Select file")))}}]),t}(r.a.Component),F=Object(c.b)(null,{updateFileContent:function(e){return{type:"UPDATE_FILE_CONTENT",payload:{fileContent:e}}},resetFile:function(){return{type:"RESET_FILE"}}})(x),N=n(163);function G(e){return{fileContent:e.file.fileContent}}var T=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(y.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){},n}return Object(w.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement(N.a,{rows:20,value:this.props.fileContent.trim(),type:"textarea",name:"text",id:"file-content",onChange:this.onChange})}}]),t}(r.a.Component),R=Object(c.b)(G,{})(T),I=n(164),L=n(49),P=n(38),S=n(79),z=n(80),A=n.n(z),X=n(25),U=n.n(X),M=n(8);var B=25.4;function Y(e){return new U.a(e).mul(B).toNumber()}function J(e,t){return"G20"!==e.units?t:{x:Y(t.x),y:Y(t.y),z:Y(t.z)}}function V(e,t,n,a){var r=new M.b(e,n).distance(),o=Math.atan2(e.y-n.y,e.x-n.x),i=Math.atan2(t.y-n.y,t.x-n.x);return new M.a(n.x,n.y,r,o,i,a).getLength()}function W(e,t){return new M.b(e,t).distance()}function Z(e){return e.reduce(function(e,t){var n=e[t.modal.motion]||new U.a(0);return Object(S.a)({},e,Object(P.a)({},t.modal.motion,n.add(t.length)))},{})}function H(e){var t,n=function(e){var t=[],n=[];return new A.a({addLine:function(e,n,a){t.push({modal:e,startPoint:J(e,n),endPoint:J(e,a)})},addArcCurve:function(e,t,a,r){n.push({modal:e,startPoint:J(e,t),endPoint:J(e,a),fixedPoint:J(e,r)})}}).loadFromStringSync(e),{lines:t,curves:n}}(e),a=n.lines,r=n.curves,o=a.map(function(e){var t=e.startPoint,n=e.endPoint;return{modal:e.modal,length:W(new M.c(t.x,t.y,t.z),new M.c(n.x,n.y,n.z))}}),i=r.map(function(e){var t=e.startPoint,n=e.endPoint,a=e.fixedPoint,r=e.modal,o=new M.c(a.x,a.y,a.z);return{modal:r,length:V(new M.c(t.x,t.y,t.z),new M.c(n.x,n.y,n.z),o,"G2"===e.modal.motion)}});return{linesDistance:Z(o),curvesDistance:Z(i),totalDistance:(t=[].concat(Object(L.a)(o.map(function(e){return e.length})),Object(L.a)(i.map(function(e){return e.length}))),t.reduce(function(e,t){return e.add(t)},new U.a(0)))}}var $=2;function q(e){return e.toNumber().toLocaleString(void 0,{maximumFractionDigits:$,minimumFractionDigits:$})}var K={G0:"Rapid positioning - move mode",G1:"Linear interpolation - work mode",G2:"Circular interpolation, clockwis - work mode",G3:"Circular interpolation, counterclockwise - work mode"};function Q(e){return Object.keys(e).map(function(t){var n=K[t];return r.a.createElement("tr",{key:t},r.a.createElement("td",null,n?r.a.createElement("abbr",{title:n},t):t),r.a.createElement("td",{className:"text-right"},q(e[t])))})}var ee=function(e){function t(){return Object(b.a)(this,t),Object(y.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=H(this.props.fileContent);return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{striped:!0,bordered:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Motion"),r.a.createElement("th",{className:"text-right"},"Distance (mm)"))),r.a.createElement("tbody",null,Q(e.linesDistance),Q(e.curvesDistance),r.a.createElement("tr",{className:"font-weight-bold"},r.a.createElement("td",null,"Total"),r.a.createElement("td",{className:"text-right"},q(e.totalDistance))))),r.a.createElement("p",null,"More info about G code here:\xa0",r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://en.wikipedia.org/wiki/G-code#List_of_G-codes_commonly_found_on_FANUC_and_similarly_designed_controls_for_milling_and_turning"},"https://en.wikipedia.org/wiki/G-code#List_of_G-codes_commonly_found_on_FANUC_and_similarly_designed_controls_for_milling_and_turning")))}}]),t}(r.a.Component),te=Object(c.b)(G)(ee),ne={position:"absolute",top:0,right:0,border:0};function ae(){return r.a.createElement("a",{href:"https://github.com/vojty/g-code-analyzer"},r.a.createElement("img",{style:ne,src:"https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png",alt:"Fork me on GitHub"}))}var re=function(){return r.a.createElement(c.a,{store:g},r.a.createElement(m.DragDropContextProvider,{backend:f.a},r.a.createElement("div",{className:"App"},r.a.createElement(ae,null),r.a.createElement(l.a,null,r.a.createElement(u.a,null,r.a.createElement("h1",{className:"display-1 mb-4"},"G code analyzer")),r.a.createElement(u.a,null,r.a.createElement(s.a,null,r.a.createElement(F,null),r.a.createElement(R,null)),r.a.createElement(s.a,null,r.a.createElement(te,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},82:function(e,t,n){e.exports=n(161)},87:function(e,t,n){}},[[82,1,2]]]);
//# sourceMappingURL=main.8e2801b9.chunk.js.map